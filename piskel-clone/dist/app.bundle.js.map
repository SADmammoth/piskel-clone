{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/screens/canvas/Tools/tool.js","webpack:///./src/screens/canvas/Tools/pen/index.js","webpack:///./src/screens/canvas/Tools/eraser/index.js","webpack:///./src/screens/canvas/Tools/bucket/bucket.js","webpack:///./src/screens/canvas/Tools/toolbarManager.js","webpack:///./src/screens/canvas/Tools/colorManager.js","webpack:///./src/screens/canvas/Tools/brushbarManager.js","webpack:///./src/components/frames-list/Frame.js","webpack:///./src/screens/canvas/Tools/canvasManager.js","webpack:///./src/components/layers-list/layersManager.js","webpack:///./src/components/layers-list/Layer.js","webpack:///./src/components/layers-list/index.js","webpack:///./src/components/layers-list/layersList.js","webpack:///./src/components/frames-list/framesManager.js","webpack:///./src/components/frames-list/index.js","webpack:///./src/components/frames-list/framesList.js","webpack:///./src/screens/preview/videoPreviewer.js","webpack:///./src/index.js","webpack:///./src/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Tool","constructor","this","is_Acting","manager","window","globalState","currentLayer","activateTool","event","startAction","invokeTool","invoke","currentTool","suspendTool","toolAction","intimeActions","suspend","deactivateTool","stopAction","Pen","super","clickAction","context","canvas","getContext","currentPath","Path2D","widthMod","brushWidth","paintColor","primaryColor","fillStyle","beginPath","paintPoint","paint","unit_size","prevX","center_pixel","d_x","prevY","d_y","fill","getPointedUnit","pageX","pageY","closePath","Eraser","globalCompositeOperation","Bucket","[object Object]","start","color","getColor","async","rec","unit","arr","secondaryColor","get_neighbors","length","splice","map","x","dir","console","log","Array","of","toolbarManager","toolsObject","updateView","updatePreview","$","mouseup","blur","on","delegate","signal","update","reload","tool","off","e","stopImmediatePropagation","target","getAttribute","removeClass","classList","add","colorManager","default_primary","default_secondary","style","backgroundColor","buf","brushbarManager","default_width","text","clearTimeout","timeout","css","Frame","count","layerList","html","node","previewTemplate","append","preview","find","redraw","canvasManager","width","height","unit_width","unit_height","constructCanvas","fillRect","getCanvasPoint","canvasX","canvasY","rect","getBoundingClientRect","left","top","findUnit","unitX","unitY","Math","floor","pointedUnit","XY","getUnit","canvasUnit","locateUnit","locateThatUnit","set","reconfigurePixels","y","south","north","east","west","south_west","south_east","north_east","neighbors","push","north_west","pixels","getImageData","data","getPixels","path","painted","layersManager","layersList","layers","reduce","acc","delete","remove","chooseLayer","createLayer","editLayer","Layer","zIndex","base_layer","listObject","Layer 1","layersCount","empty","embed","undefined","Error","canvasTemplate","lastLayer","linkSignal","keys","reverse","showCanvas","forEach","drawImage","wrap","parent","unwrap","putImageData","framesManager","framesList","frames","chooseFrame","attr","createFrame","contains","currentFrame","editFrame","basicFrame","list","framesCount","toolbarSignal","frame","videoPreviewer","interval","setInterval","fps","canvas2","stopPreview","currentFramelist","blankwindow","win","open","document","body","addClass","clearInterval","app_name","previewer","toolbar"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default class Tool {\n    constructor(name) {\n        this.name = name;\n        this.is_Acting = false;\n        this.manager = window.globalState.currentLayer.manager;\n    }\n\n    activateTool(event, startAction) {\n        startAction(event);\n        this.is_Acting = true;\n    }\n\n    invokeTool(event, invoke) {\n        if (window.globalState.currentTool) {\n            window.globalState.currentTool.suspendTool(event);\n        }\n        window.globalState.currentTool = this;\n        this.manager = window.globalState.currentLayer.manager;\n        if (invoke) {\n            invoke(event);\n        }\n    }\n\n    toolAction(event, intimeActions) {\n        if (this.is_Acting) {\n            intimeActions(event);\n        }\n    }\n\n    suspendTool(event, suspend) {\n        window.globalState.currentTool = null;\n        if (suspend) {\n            suspend(event);\n        }\n    }\n\n    deactivateTool(event, stopAction) {\n        this.is_Acting = false;\n        stopAction(event);\n    }\n}\n","import Tool from '../tool.js';\n\nexport default class Pen extends Tool {\n    constructor() {\n        super('pen');\n    }\n\n    clickAction() {\n        return true;\n    }\n\n    startAction(event) {\n        let context = this.manager.canvas.getContext('2d');\n        this.currentPath = new Path2D();\n        this.widthMod = this.widthMod = window.globalState.brushWidth;\n        this.paintColor = window.globalState.primaryColor;\n        context.fillStyle = this.paintColor;\n        context.beginPath();\n        let paintPoint = this.paintPoint(event);\n        paintPoint.paint(this.currentPath, this.widthMod * this.manager.unit_size, this.paintColor);\n        this.prevX = paintPoint.center_pixel.d_x;\n        this.prevY = paintPoint.center_pixel.d_y;\n        context.fill(this.currentPath);\n    }\n\n    paintPoint(event) {\n        return this.manager.getPointedUnit(event.pageX, event.pageY);\n    }\n\n    intimeActions(event) {\n        let paintPoint = this.paintPoint(event);\n        paintPoint.paint(this.currentPath, this.widthMod * this.manager.unit_size, this.paintColor);\n        this.prevX = paintPoint.d_x;\n        this.prevY = paintPoint.d_y;\n    }\n\n    stopAction() {\n        let context = this.manager.canvas.getContext('2d');\n        this.prevX = null; this.prevY = null;\n        context.closePath();\n    }\n\n    activateTool(event) {\n        return super.activateTool(event, this.startAction.bind(this));\n    }\n\n    toolAction(event) {\n        super.toolAction(event, this.intimeActions.bind(this));\n    }\n\n    deactivateTool(event) {\n        super.deactivateTool(event, this.stopAction.bind(this));\n    }\n\n    suspend() {\n        this.paintColor = null;\n        this.widthMod = null;\n    }\n\n    suspendTool(event) {\n        super.suspendTool(event, this.suspend.bind(this));\n    }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// function setpixelated(context) {\n//     context['imageSmoothingEnabled'] = false;       /* standard */\n//     context['mozImageSmoothingEnabled'] = false;    /* Firefox */\n//     context['oImageSmoothingEnabled'] = false;      /* Opera */\n//     context['webkitImageSmoothingEnabled'] = false; /* Safari */\n//     context['msImageSmoothingEnabled'] = false;     /* IE */\n// }\n\n\n\n    // startAction(event) {\n\n    //     let context = this.manager.canvas.getContext('2d');\n    //     context.beginPath();\n    //     context.strokeStyle = 'blue';\n    //     context.fillStyle = 'blue';\n    //     let paintPoint = this.paintPoint(event);\n    //     paintPoint.paint();\n    //     this.prevX = paintPoint.center_pixel.d_x;\n    //     this.prevY = paintPoint.center_pixel.d_y;\n\n    //     console.log('Pen tool invoked succesfully...');\n    // }\n\n    // paintPoint(event) {\n    //     return this.manager.getPointedUnit(event.pageX, event.pageY);\n    // }\n\n    // intimeActions(event) {\n    //     let context = this.manager.canvas.getContext('2d');\n    //     context.lineWidth = this.widthMod * this.manager.unit_size;\n    //     let paintPoint = this.paintPoint(event).center_pixel;\n\n    //     moveTo(paintPoint.d_x, paintPoint.d_y);\n    //     if (this.prevY || this.prevX) {\n    //         context.lineTo(this.prevX, this.prevY);\n    //     }\n    //     context.stroke();\n    //     this.prevX = paintPoint.d_x;\n    //     this.prevY = paintPoint.d_y;\n    // }\n\n    // stopAction(event) {\n    //     let paintPoint = this.paintPoint(event);\n    //     paintPoint.paint();\n    //     this.prevX = null; this.prevY = null;\n    //     console.log('Pen tool suspended succesfully...');\n    // }\n","import Pen from \"../pen/index.js\";\n\nexport default class Eraser extends Pen {\n    constructor() {\n        super();\n        this.name = 'eraser';\n    }\n\n    startAction(event) {\n        this.manager.canvas.getContext('2d').globalCompositeOperation = 'destination-out';\n        super.startAction(event);\n    }\n\n    stopAction(event) {\n        super.stopAction(event);\n        this.manager.canvas.getContext('2d').globalCompositeOperation = 'source-over';\n    }\n\n}\n","import Tool from \"../tool.js\";\n\nexport default class Bucket extends Tool {\n  constructor() {\n    super('bucket');\n    this.clickAction = this.clickAction.bind(this);\n  }\n\n\n  async clickAction(event) {\n    this.start = this.manager.getPointedUnit(event.pageX, event.pageY);\n    this.color = this.start.getColor();\n    async function paint(arr, color) {\n\n      for (let i = 0; i < arr.length; i++) {\n\n        if (arr[i] === null) {\n          return [];\n        }\n\n        if (arr[i].getColor() === color) {\n          arr[i].paint(null, window.globalState.unit_size, window.globalState.secondaryColor);\n        } else {\n          arr.splice(i, 1);\n        }\n\n      }\n      if (arr !== []) {\n        arr = arr.map((x) => { if (x.dir) { console.log(x[x.dir]); return x[x.dir](); } });\n      }\n      return arr;\n    }\n\n    async function rec(color, unit, arr, i) {\n\n      if (i === 1) {\n        unit.paint(null, window.globalState.unit_size, window.globalState.secondaryColor);\n        arr = unit.get_neighbors(1);\n      } else {\n        arr = await paint(arr, color);\n      }\n      if (arr === []) {\n        return;\n      }\n\n      i++;\n      if (i > 200) {\n        return;\n      }\n      return rec(color, unit, arr, i);\n    }\n\n    rec(this.color, this.start, Array.of(this.start), 1);\n  }\n\n\n  startAction() { return true; }\n\n  intimeActions() { return true; }\n\n  stopAction() { return true; }\n\n  toolAction() { return true; }\n\n  activateTool() { return true; }\n\n  deactivateTool() { return true; }\n}\n","export default class toolbarManager {\n    constructor(toolsObject) {\n        this.toolsObject = toolsObject;\n        window.globalState.currentTool = null;\n    }\n\n    start(updateView, updatePreview) {\n        $('.btn').mouseup(function () { this.blur() });\n\n        $('.toolbar').on('click', this.delegate.bind(this));\n        this.signal = this.signal.bind(this);\n        this.update = updateView;\n        this.reload = updatePreview;\n    }\n\n    signal() {\n        this.tool = window.globalState.currentTool;\n        this.tool.invokeTool();\n        $(this.tool.manager.canvas).off('click');\n        $(this.tool.manager.canvas).off('mousedown');\n        $(this.tool.manager.canvas).off('mousemove');\n        $(this.tool.manager.canvas).off('mouseup');\n        $(this.tool.manager.canvas).off('mouseout');\n        $(this.tool.manager.canvas).on('click', (e => { e.stopImmediatePropagation(); window.globalState.currentTool.clickAction(e); }));\n        $(this.tool.manager.canvas).on('mousedown', (e) => window.globalState.currentTool.activateTool(e));\n        $(this.tool.manager.canvas).on('mousemove', (e) => window.globalState.currentTool.toolAction(e));\n        $(this.tool.manager.canvas).on('mouseup', (e) => { this.reload(); this.update(); window.globalState.currentTool.deactivateTool(e) });\n        $(this.tool.manager.canvas).on('mouseout', (e) => { this.reload(); this.update(); window.globalState.currentTool.deactivateTool(e) });\n    }\n\n    delegate(event) {\n        this.event = event;\n        this.tool = new this.toolsObject[event.target.getAttribute('tool')].prototype.constructor();\n\n        if (window.globalState.currentTool) {\n            $(this.tool.manager.canvas).off('click');\n            $(this.tool.manager.canvas).off('mousedown');\n            $(this.tool.manager.canvas).off('mousemove');\n            $(this.tool.manager.canvas).off('mouseup');\n            $(this.tool.manager.canvas).off('mouseout');\n            $('.toolbar .active').removeClass('active');\n            if (event.target.getAttribute('tool') === window.globalState.currentTool.name) {\n                window.globalState.currentTool.suspendTool(event);\n                return true;\n            }\n            window.globalState.currentTool.suspendTool(event);\n        }\n        event.target.classList.add('active');\n        this.tool.invokeTool(event);\n        $(this.tool.manager.canvas).on('click', (e => { e.stopImmediatePropagation(); window.globalState.currentTool.clickAction(e); }));\n        $(this.tool.manager.canvas).on('mousedown', (e) => window.globalState.currentTool.activateTool(e));\n        $(this.tool.manager.canvas).on('mousemove', (e) => window.globalState.currentTool.toolAction(e));\n        $(this.tool.manager.canvas).on('mouseup', (e) => { this.reload(); this.update(); window.globalState.currentTool.deactivateTool(e) });\n        $(this.tool.manager.canvas).on('mouseout', (e) => { this.reload(); this.update(); window.globalState.currentTool.deactivateTool(e) });\n        this.tool = null;\n    }\n\n\n}\n","export default class colorManager {\n  constructor(default_primary, default_secondary) {\n    window.globalState.primaryColor = default_primary;\n    window.globalState.secondaryColor = default_secondary;\n    this.default_primary = default_primary;\n    this.default_secondary = default_secondary;\n  }\n\n  start() {\n    $(\".colorbar [tool='primaryColor']\")[0].value = window.globalState.primaryColor;\n    $(\".colorbar [tool='secondaryColor']\")[0].value = window.globalState.secondaryColor;\n    $(\".colorbar [tool='primaryColor']\")[0].style.backgroundColor = window.globalState.primaryColor;\n    $(\".colorbar [tool='secondaryColor']\")[0].style.backgroundColor = window.globalState.secondaryColor;\n    $('.colorbar').on('input', this.delegate.bind(this));\n    $('.colorbar').on('click', this.delegate.bind(this));\n  }\n\n  delegate(event) {\n    if (event.target.getAttribute('tool') === 'swap_colors') {\n      let buf = window.globalState.secondaryColor;\n      window.globalState.secondaryColor = window.globalState.primaryColor;\n      window.globalState.primaryColor = buf;\n      $(\".colorbar [tool='primaryColor']\")[0].value = window.globalState.primaryColor;\n      $(\".colorbar [tool='primaryColor']\")[0].style.backgroundColor = window.globalState.primaryColor;\n      $(\".colorbar [tool='secondaryColor']\")[0].value = window.globalState.secondaryColor;\n      $(\".colorbar [tool='secondaryColor']\")[0].style.backgroundColor = window.globalState.secondaryColor;\n      return true;\n    }\n    window.globalState[event.target.getAttribute('tool')] = event.target.value;\n  }\n}\n","export default class brushbarManager {\n  constructor(default_width) {\n    this.default_width = default_width;\n    window.globalState.brushWidth = default_width;\n  }\n\n  start() {\n    $('#width-bar')[0].value = window.globalState.brushWidth;\n    $(\".brushbar output[for='width-bar']\").text(window.globalState.brushWidth);\n    $('#width-bar').on('input', this.update.bind(this));\n  }\n\n  update(event) {\n    clearTimeout(this.timeout);\n    window.globalState.brushWidth = event.target.value;\n    $(\".brushbar output[for='width-bar']\").text(window.globalState.brushWidth);\n    $(\".brushbar output[for='width-bar']\").css('left', ((window.globalState.brushWidth - 1) * 50) + 'px');\n  }\n}\n","export default class Frame {\n    constructor(count, layerList) {\n        this.count = count;\n        this.layerList = layerList;\n    }\n\n    html() {\n        let node = $(`<button class='frame btn btn-primary'><span>${this.count}</span>${window.globalState.previewTemplate}</button>`);\n        $('.frames').append(node);\n        this.layerList.preview(node.find('.preview'));\n    }\n\n    preview(canvas) {\n        return this.layerList.redraw(canvas);\n    }\n}\n","\nexport default class canvasManager {\n    constructor(width, height, canvas) {\n        this.unit_width = width;\n        this.unit_height = height;\n        this.canvas = canvas;\n        this.constructCanvas();\n    }\n\n    constructCanvas() {\n        this.canvas.getContext('2d').fillStyle = '#ffffff00';\n        this.canvas.getContext('2d').fillRect(0, 0, this.canvas.width, this.canvas.height);\n        this.unit_size = this.canvas.width / this.unit_width;\n        window.globalState.unit_size = this.unit_size;\n    }\n\n    getCanvasPoint(pageX, pageY) {\n        let rect = this.canvas.getBoundingClientRect();\n        let canvasX;\n        let canvasY;\n        if (pageX >= rect.width + rect.left) {\n            canvasX = rect.width + rect.left;\n        } else if (pageX <= rect.left) {\n            canvasX = rect.left;\n        } else {\n            canvasX = pageX - rect.left;\n        }\n        if (pageY >= rect.height + rect.top) {\n            canvasY = rect.height + rect.top;\n        } else if (pageY <= rect.top) {\n            canvasY = rect.top;\n        } else {\n            canvasY = pageY - rect.top;\n        }\n        return { canvasX: canvasX, canvasY: canvasY };\n    }\n\n    findUnit(canvasX, canvasY) {\n        let unitX;\n        let unitY;\n        unitX = Math.floor(canvasX / this.unit_size);\n        unitY = Math.floor(canvasY / this.unit_size);\n        return { unitX: unitX, unitY: unitY };\n    }\n\n    pointedUnit(pageX, pageY) {\n        let XY = this.getCanvasPoint(pageX, pageY);\n        return this.findUnit(XY.canvasX, XY.canvasY);\n    }\n\n    getUnit(unitX, unitY) {\n        return new canvasUnit(this, unitX, unitY);\n    }\n\n    getPointedUnit(pageX, pageY) {\n        let XY = this.getCanvasPoint(pageX, pageY);\n        XY = this.findUnit(XY.canvasX, XY.canvasY);\n        return this.getUnit(XY.unitX, XY.unitY);\n    }\n\n    locateUnit(unitX, unitY) {\n        return { canvasX: unitX * this.unit_size, canvasY: unitY * this.unit_size };\n    }\n\n    locateThatUnit(canvasUnit) {\n        return this.locateUnit(canvasUnit.d_x, canvasUnit.d_y);\n    }\n}\n\nexport class canvasUnit {\n    constructor(canvasManager, unitX, unitY, dir) {\n        this.d_x = unitX;\n        this.d_y = unitY;\n        this.manager = canvasManager;\n        let XY = this.manager.locateUnit(this.d_x, this.d_y);\n        this.center_pixel = { d_x: XY.canvasX + (this.manager.unit_size / 2), d_y: XY.canvasY + (this.manager.unit_size / 2) };\n        Object.defineProperty(this, \"unitX\", { set: function (x) { this.reconfigurePixels(); this.unitX = x; } });\n        Object.defineProperty(this, \"unitY\", { set: function (y) { this.reconfigurePixels(); this.unitY = y; } });\n        this.reconfigurePixels();\n        this.dir = dir;\n        this['south'] = this.south.bind(this);\n        this['north'] = this.north.bind(this);\n        this['east'] = this.east.bind(this);\n        this['west'] = this.west.bind(this);\n        this['south_west'] = this.south_west.bind(this);\n        this['south_east'] = this.south_east.bind(this);\n        this['north_west'] = this.south_west.bind(this);\n        this['north_east'] = this.south_east.bind(this);\n\n    }\n\n    south(i) {\n        if (this.d_y - i < 0) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x, this.d_y - i, 'south');\n    }\n\n    north(i) {\n        if (this.d_y + i > this.manager.unit_height - 1) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x, this.d_y + i, 'north');\n    }\n\n    west(i) {\n        if (this.d_x - i < 0) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x - i, this.d_y, 'west');\n    }\n\n    east(i) {\n        if (this.d_x + i > this.manager.unit_width - 1) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x + i, this.d_y, 'east');\n    }\n\n    south_west(i) {\n        if (this.d_x - i < 0 || this.d_y - i < 0) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x - i, this.d_y - i, 'south_west');\n    }\n\n    south_east(i) {\n        if (this.d_x + i > this.manager.unit_width - 1 || this.d_y - i < 0) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x + i, this.d_y - i, 'south_east');\n    }\n\n    'north_west'(i) {\n        if (this.d_x - i < 0 || this.d_y + i > this.manager.unit_height - 1) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x - i, this.d_y + i, 'north_west');\n    }\n\n    north_east(i) {\n        if (this.d_x + i > this.manager.unit_width - 1 || this.d_y + i > this.manager.unit_height - 1) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x + i, this.d_y + i, 'north_east');\n    }\n\n    get_neighbors(i) {\n        let neighbors = [];\n        neighbors.push(this.west(i), this.north_west(i), this.north(i), this.north_east(i));\n        neighbors.push(this.east(i), this.south_east(i), this.south(i), this.south_west(i));\n        return neighbors;\n    }\n\n    reconfigurePixels() {\n        let XY = this.manager.locateUnit(this.d_x, this.d_y);\n        this.pixels = this.manager.canvas.getContext('2d').getImageData(XY.canvasX, XY.canvasY, this.manager.unit_size, this.manager.unit_size);\n    }\n\n    getColor() {\n        let XY = this.manager.locateUnit(this.d_x, this.d_y);\n        this.pixels = this.manager.canvas.getContext('2d').getImageData(XY.canvasX, XY.canvasY, this.manager.unit_size, this.manager.unit_size);\n        let data = this.pixels.data;\n        if (data[3] < 255) {\n\n            return null;\n        }\n        return `${data[0]}${data[1]}${data[2]}`;\n    }\n\n    getPixels() {\n        return this.pixels;\n    }\n\n    paint(path, width, color) {\n        let XY = this.manager.locateUnit(this.d_x, this.d_y);\n        if (path === null) {\n            this.manager.canvas.getContext('2d').fillStyle = color;\n            this.manager.canvas.getContext('2d').rect(XY.canvasX, XY.canvasY, width, width);\n            this.manager.canvas.getContext('2d').fill();\n        } else {\n            path.rect(XY.canvasX, XY.canvasY, width, width);\n            this.manager.canvas.getContext('2d').fill(path);\n        }\n        this.painted = true;\n    }\n}\n","export default class layersManager {\n    constructor(layersList) {\n        this.layersList = layersList;\n    }\n\n    html() {\n        let str = this.layersList.layers().reduce((acc, x) => acc += x.html(), '');\n        return `\n        <div class='layers btn-toolbar-vertical'>\n            <ul class='layers-list btn-group-vertical'>\n            ${str}\n            </ul>\n            <ul class='layersbar btn-group-vertical'>\n                <button tool='newlayer'>New layer</button>\n            </ul>\n        </div>`\n    }\n\n    delete() {\n        $('.layers').remove();\n    }\n\n    bind() {\n        $('.layers-list').on('click', this.chooseLayer.bind(this));\n        $('.layersbar').on('click', (e) => { if (e.target.getAttribute('tool') === 'newlayer') this.layersList.createLayer(); });\n    }\n\n    chooseLayer(e) {\n        if ($(e.target).text() === window.globalState.currentLayer.name) {\n            return true;\n        }\n        $('.layers-list .active').removeClass('active');\n\n        e.target.classList.add('active');\n        this.layersList.editLayer($(e.target).text());\n    }\n}\n","export default class Layer {\n    constructor(name, canvasManager, zIndex) {\n        this.name = name;\n        this.manager = canvasManager;\n        this.zIndex = zIndex;\n        this.canvas = this.manager.canvas;\n    }\n\n    html() {\n        return `<button class='btn btn-primary'>${this.name}</button>`;\n    }\n}\n","import layersList from \"./layersList.js\";\n\n// import './style.css'\n\nexport default layersList;\n","import canvasManager from '../../screens/canvas/Tools/canvasManager.js'\nimport layersManager from './layersManager.js';\nimport Layer from './Layer.js';\n\nexport default class layersList {\n  constructor(signal, base_layer) {\n    if (base_layer) {\n      this.base_layer = base_layer;\n      this.layersManager = new layersManager(this);\n      this.listObject = { 'Layer 1': base_layer };\n      this.layersCount = 1;\n      window.globalState.currentLayer = base_layer;\n    }\n    else {\n      this.layersCount = 0;\n      this.layersManager = new layersManager(this);\n      this.listObject = {};\n      $('.workflow').empty();\n      this.createLayer('Layer 1');\n    }\n\n    this.updateView = signal;\n  }\n\n  embed() {\n    this.layersManager.delete();\n    let html = this.layersManager.html();\n    $('body').append(html);\n    this.layersManager.bind();\n  }\n\n  createLayer(name) {\n    if (this.listObject[name] !== undefined) {\n      throw new Error('Cannot create layer with name specified');\n    }\n    this.layersCount++;\n    let canvas = $(window.globalState.canvasTemplate);\n    canvas.css('zIndex', this.layersCount);\n    $('.workflow').append(canvas);\n\n    let manager = new canvasManager(window.globalState.unit_width, window.globalState.unit_height, canvas[0]);\n\n    if (!name) {\n      name = `Layer ${this.layersCount}`;\n    }\n    this.listObject[name] = new Layer(name, manager, this.layersCount);\n    window.globalState.currentLayer = this.listObject[name];\n    if (window.globalState.currentTool) {\n      this.updateView();\n    }\n    this.lastLayer = this.listObject[name];\n    this.embed();\n  }\n\n  editLayer(name) {\n    if (!name || this.listObject[name] === undefined) {\n      throw new Error('Cannot find layer with name specified');\n    }\n    window.globalState.currentLayer = this.listObject[name];\n    if (window.globalState.currentTool) {\n      this.updateView();\n    }\n  }\n\n  linkSignal(signal) {\n    this.updateView = signal;\n  }\n\n  layers() {\n    return Object.keys(this.listObject).reduce((acc, x) => { acc.push(this.listObject[x]); return acc; }, []).reverse();\n  }\n\n  showCanvas() {\n    $('.workflow').empty();\n    Object.keys(this.listObject).forEach((x) => $('.workflow').append(this.listObject[x].canvas));\n    this.embed();\n  }\n\n  preview(canvas) {\n    Object.keys(this.listObject).reverse().forEach((x) => canvas[0].getContext('2d').drawImage(this.listObject[x].canvas, 0, 0));\n    let html = canvas.wrap('<p></p>').parent().html();\n    canvas.unwrap();\n    return html;\n  }\n\n  redraw(canvas) {\n    function getImageData(canvas) {\n      return canvas.getContext('2d').getImageData(0, 0, canvas.width, canvas.height);\n    }\n    Object.keys(this.listObject).reverse().forEach((x) => canvas[0].getContext('2d').putImageData(getImageData(this.listObject[x].canvas), 0, 0));\n    let html = canvas.wrap('<p></p>').parent().html();\n    canvas.unwrap();\n    return html;\n  }\n}\n","export default class framesManager {\n  constructor(framesList) {\n    this.framesList = framesList;\n  }\n\n  html() {\n    let str = `\n        <div class='frames'>\n            <ul class='framesbar btn-group-vertical'>\n                <button tool='newframe'>New frame</button>\n            </ul>\n        </div>`;\n    $('body').append(str);\n    this.framesList.frames().map((x) => x.html());\n  }\n\n  delete() {\n    $('.frames').remove();\n  }\n\n  bind() {\n    $('.frame').on('click', this.chooseFrame.bind(this));\n    $('.framesbar').on('click', (event) => {\n      if ($(event.target).attr('tool') === 'newframe') {\n        this.framesList.createFrame();\n      }\n    });\n  }\n\n  chooseFrame(e) {\n    if (e.target.classList.contains('btn')) {\n      let target = $(e.target).find('span');\n      if (target.text() === window.globalState.currentFrame.count) {\n        return true;\n      }\n      $('.frames-list .active').removeClass('active');\n\n      e.target.classList.add('active');\n      this.framesList.editFrame(target.text());\n    }\n  }\n}\n","import framesList from \"./framesList.js\";\n\n// import './style.css'\n\nexport default framesList;\n","\nimport Frame from './Frame.js';\nimport layersList from '../layers-list/index.js';\nimport framesManager from './framesManager.js'\n\nexport default class framesList {\n  constructor(basicFrame, manager) {\n    if (basicFrame && manager) {\n      this.basicFrame = basicFrame;\n      this.framesManager = manager;\n      this.list = Array.of(this.basicFrame);\n      this.framesCount = 1;\n      window.globalState.currentFrame = basicFrame;\n    } else {\n      this.framesCount = 0;\n      this.framesManager = new framesManager(this);\n      this.list = [];\n      this.update = this.update.bind(this);\n    }\n  }\n\n  start(toolbarSignal) {\n    this.signal = toolbarSignal;\n    this.createFrame();\n\n  }\n\n  embed() {\n    this.framesManager.delete();\n    this.framesManager.html();\n\n\n    this.framesManager.bind();\n  }\n\n  createFrame() {\n    let frame = new Frame(this.framesCount, new layersList(this.signal));\n    this.list.push(frame);\n    this.embed();\n    window.globalState.currentFrame = frame;\n    this.framesCount++;\n  }\n\n  editFrame(count) {\n    window.globalState.currentFrame = this.list[count];\n    window.globalState.currentFrame.layerList.showCanvas();\n    window.globalState.currentLayer = window.globalState.currentFrame.layerList.lastLayer;\n    this.embed();\n  }\n\n  update() {\n    this.embed();\n  }\n\n  frames() {\n    return this.list;\n  }\n}\n","export default class videoPreviewer {\n  constructor() {\n    this.frame = 0;\n    this.update = this.update.bind(this);\n  }\n\n  async start() {\n    this.embed();\n    this.interval = setInterval(this.updateView.bind(this), 1000 / window.globalState.fps);\n\n  }\n\n  async updateView() {\n    this.frames[this.frame].preview(this.canvas);\n    if (this.canvas2 !== undefined) {\n      this.frames[this.frame].preview(this.canvas2);\n    }\n    if (this.frame === this.frames.length - 1) {\n\n      this.frame = 0;\n      return;\n    }\n    this.frame++;\n  }\n\n  async embed() {\n    this.stopPreview();\n    let canvas = $(window.globalState.previewTemplate);\n    $('body').append(canvas);\n    $('body .preview').wrap('<div class=\"big_preview\"/>');\n    this.canvas = $('.big_preview canvas');\n    this.frames = window.globalState.currentFramelist.frames();\n    $('body .big_preview').append('<button class =\"fullpreview\">Preview</button>');\n    $('body .big_preview .fullpreview').on('click', this.blankwindow.bind(this));\n    $('body .big_preview').append('<button class =\"stopPreview\">StopPreview</button>');\n    $('body .big_preview .stopPreview').on('click', this.stopPreview.bind(this));\n    $('body .big_preview').append('<br><button class =\"startPreview\">startPreview</button>');\n    $('body .big_preview .startPreview').on('click', this.update.bind(this));\n  }\n\n  async update() {\n    this.stopPreview();\n    this.frames = window.globalState.currentFramelist.frames();\n    this.interval = setInterval(this.updateView.bind(this), 1000 / window.globalState.fps);\n  }\n\n  async blankwindow() {\n    this.stopPreview();\n    let win = window.open('about:blank', 'Video preview');\n    $(win.document.body).append($(window.globalState.canvasTemplate));\n    this.canvas2 = $(win.document.body).find('canvas');\n    this.canvas2.addClass('fullscreen');\n    this.canvas2[0].style = `--w: 500px;\n    --i: ${window.globalState.unit_width};\n    width: 500px;\n    height: 500px;\n    background-color: #ffffff;\n    background-image: linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(135deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(135deg, transparent 75%, #ccc 75%);\n    background-size: calc(var(--w) /var(--i) * 2) calc(var(--w) /var(--i) * 2); /* Must be a square */\n    background-position: 0 0, calc(var(--w) /var(--i)) 0, calc(var(--w) /var(--i)) calc(var(--w) /var(--i) * -1), 0px calc(var(--w) /var(--i)); /* Must be half of one side of the square */\n    border: 1px solid #000000; `;\n    this.frames = window.globalState.currentFramelist.frames();\n    this.interval = setInterval(this.updateView.bind(this), 1000 / window.globalState.fps);\n  }\n\n  async stopPreview() {\n    clearInterval(this.interval);\n  }\n}\n","import PiskelApp from './app'\n\nlet app = new PiskelApp();\n\napp.start();\n","import { Pen, Eraser, Bucket, toolbarManager, colorManager, brushbarManager } from './screens/canvas/index.js'\n\nimport framesList from \"./components/frames-list/index.js\";\n\nimport videoPreviewer from \"./screens/preview/videoPreviewer.js\";\n\nexport default class PiskelApp {\n  constructor() {\n    window.globalState = {\n      app_name: 'PiskelClone',\n      canvasTemplate: '<canvas class=\"layer\" width= 500 height = 500></canvas>',\n      previewTemplate: '<canvas class=\"preview\" width= 500 height = 500</canvas>',\n      unit_width: 32,\n      unit_height: 32,\n      fps: 24\n    };\n  }\n\n  start() {\n    window.globalState.currentFramelist = new framesList();\n\n    let previewer = new videoPreviewer();\n    previewer.start();\n\n    let toolsObject = {};\n    toolsObject['pen'] = Pen;\n    toolsObject['eraser'] = Eraser;\n    toolsObject['bucket'] = Bucket;\n\n    let toolbar = new toolbarManager(toolsObject);\n    toolbar.start(window.globalState.currentFramelist.update, previewer.update);\n    window.globalState.currentFramelist.start(toolbar.signal);\n\n    let colorbar = new colorManager('#000000', '#ff0000');\n    colorbar.start();\n\n    let brushbar = new brushbarManager(1);\n    brushbar.start();\n    $(':root').css('--i', window.globalState.unit_width);\n  }\n}\n"],"sourceRoot":""}