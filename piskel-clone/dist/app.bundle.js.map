{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/screens/canvas/Tools/tool.js","webpack:///./src/screens/canvas/Tools/pen/index.js","webpack:///./src/components/frames-list/Frame.js","webpack:///./src/screens/canvas/Tools/canvasManager.js","webpack:///./src/components/layers-list/layersManager.js","webpack:///./src/components/layers-list/Layer.js","webpack:///./src/components/layers-list/index.js","webpack:///./src/components/layers-list/layersList.js","webpack:///./src/components/frames-list/framesManager.js","webpack:///./src/components/frames-list/index.js","webpack:///./src/components/frames-list/framesList.js","webpack:///./src/index.js","webpack:///./src/screens/preview/videoPreviewer.js","webpack:///./src/screens/canvas/Tools/eraser/index.js","webpack:///./src/screens/canvas/Tools/bucket/bucket.js","webpack:///./src/screens/canvas/Tools/toolbarManager.js","webpack:///./src/screens/canvas/Tools/colorManager.js","webpack:///./src/screens/canvas/Tools/brushbarManager.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Tool","constructor","this","is_Acting","manager","window","globalState","currentLayer","activateTool","event","startAction","invokeTool","invoke","currentTool","suspendTool","toolAction","intimeActions","suspend","deactivateTool","stopAction","Pen","super","clickAction","context","canvas","getContext","currentPath","Path2D","widthMod","brushWidth","paintColor","primaryColor","fillStyle","beginPath","paintPoint","paint","unit_size","prevX","center_pixel","d_x","prevY","d_y","fill","getPointedUnit","pageX","pageY","closePath","Frame","count","layerList","html","node","$","previewTemplate","append","preview","find","redraw","canvasManager","width","height","unit_width","unit_height","constructCanvas","fillRect","getCanvasPoint","canvasX","canvasY","rect","getBoundingClientRect","left","top","findUnit","unitX","unitY","Math","floor","pointedUnit","XY","getUnit","canvasUnit","locateUnit","locateThatUnit","dir","set","x","reconfigurePixels","y","south","north","east","west","south_west","south_east","[object Object]","north_east","get_neighbors","neighbors","push","north_west","pixels","getImageData","getColor","data","getPixels","path","color","painted","layersManager","layersList","layers","reduce","acc","delete","remove","on","chooseLayer","e","target","getAttribute","createLayer","text","removeClass","classList","add","editLayer","Layer","zIndex","signal","base_layer","listObject","Layer 1","layersCount","empty","updateView","embed","console","log","undefined","Error","canvasTemplate","css","lastLayer","linkSignal","keys","reverse","showCanvas","forEach","drawImage","wrap","parent","putImageData","framesManager","framesList","frames","map","chooseFrame","attr","createFrame","contains","currentFrame","editFrame","basicFrame","list","Array","of","framesCount","update","start","toolbarSignal","frame","app_name","fps","currentFramelist","previewer","interval","setInterval","canvas2","length","clearInterval","blankwindow","win","open","document","body","toolsObject","globalCompositeOperation","async","rec","unit","arr","secondaryColor","splice","toolbar","updatePreview","mouseup","blur","delegate","reload","tool","off","stopImmediatePropagation","default_primary","default_secondary","buf","default_width","toDataURL"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default class Tool {\n    constructor(name) {\n        this.name = name;\n        this.is_Acting = false;\n        this.manager = window.globalState.currentLayer.manager;\n    }\n\n    activateTool(event, startAction) {\n        startAction(event);\n        this.is_Acting = true;\n    }\n\n    invokeTool(event, invoke) {\n        if (window.globalState.currentTool) {\n            window.globalState.currentTool.suspendTool(event);\n        }\n        window.globalState.currentTool = this;\n        this.manager = window.globalState.currentLayer.manager;\n        if (invoke) {\n            invoke(event);\n        }\n    }\n\n    toolAction(event, intimeActions) {\n        if (this.is_Acting) {\n            intimeActions(event);\n        }\n    }\n\n    suspendTool(event, suspend) {\n        window.globalState.currentTool = null;\n        if (suspend) {\n            suspend(event);\n        }\n    }\n\n    deactivateTool(event, stopAction) {\n        this.is_Acting = false;\n        stopAction(event);\n    }\n}\n","import Tool from '../tool.js';\n\nexport default class Pen extends Tool {\n    constructor() {\n        super('pen');\n    }\n\n    clickAction() {\n        return true;\n    }\n\n    startAction(event) {\n        let context = this.manager.canvas.getContext('2d');\n        this.currentPath = new Path2D();\n        this.widthMod = this.widthMod = window.globalState.brushWidth;\n        this.paintColor = window.globalState.primaryColor;\n        context.fillStyle = this.paintColor;\n        context.beginPath();\n        let paintPoint = this.paintPoint(event);\n        paintPoint.paint(this.currentPath, this.widthMod * this.manager.unit_size, this.paintColor);\n        this.prevX = paintPoint.center_pixel.d_x;\n        this.prevY = paintPoint.center_pixel.d_y;\n        context.fill(this.currentPath);\n    }\n\n    paintPoint(event) {\n        return this.manager.getPointedUnit(event.pageX, event.pageY);\n    }\n\n    intimeActions(event) {\n        let paintPoint = this.paintPoint(event);\n        paintPoint.paint(this.currentPath, this.widthMod * this.manager.unit_size, this.paintColor);\n        this.prevX = paintPoint.d_x;\n        this.prevY = paintPoint.d_y;\n    }\n\n    stopAction() {\n        let context = this.manager.canvas.getContext('2d');\n        this.prevX = null; this.prevY = null;\n        context.closePath();\n    }\n\n    activateTool(event) {\n        return super.activateTool(event, this.startAction.bind(this));\n    }\n\n    toolAction(event) {\n        super.toolAction(event, this.intimeActions.bind(this));\n    }\n\n    deactivateTool(event) {\n        super.deactivateTool(event, this.stopAction.bind(this));\n    }\n\n    suspend() {\n        this.paintColor = null;\n        this.widthMod = null;\n    }\n\n    suspendTool(event) {\n        super.suspendTool(event, this.suspend.bind(this));\n    }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// function setpixelated(context) {\n//     context['imageSmoothingEnabled'] = false;       /* standard */\n//     context['mozImageSmoothingEnabled'] = false;    /* Firefox */\n//     context['oImageSmoothingEnabled'] = false;      /* Opera */\n//     context['webkitImageSmoothingEnabled'] = false; /* Safari */\n//     context['msImageSmoothingEnabled'] = false;     /* IE */\n// }\n\n\n\n    // startAction(event) {\n\n    //     let context = this.manager.canvas.getContext('2d');\n    //     context.beginPath();\n    //     context.strokeStyle = 'blue';\n    //     context.fillStyle = 'blue';\n    //     let paintPoint = this.paintPoint(event);\n    //     paintPoint.paint();\n    //     this.prevX = paintPoint.center_pixel.d_x;\n    //     this.prevY = paintPoint.center_pixel.d_y;\n\n    //     console.log('Pen tool invoked succesfully...');\n    // }\n\n    // paintPoint(event) {\n    //     return this.manager.getPointedUnit(event.pageX, event.pageY);\n    // }\n\n    // intimeActions(event) {\n    //     let context = this.manager.canvas.getContext('2d');\n    //     context.lineWidth = this.widthMod * this.manager.unit_size;\n    //     let paintPoint = this.paintPoint(event).center_pixel;\n\n    //     moveTo(paintPoint.d_x, paintPoint.d_y);\n    //     if (this.prevY || this.prevX) {\n    //         context.lineTo(this.prevX, this.prevY);\n    //     }\n    //     context.stroke();\n    //     this.prevX = paintPoint.d_x;\n    //     this.prevY = paintPoint.d_y;\n    // }\n\n    // stopAction(event) {\n    //     let paintPoint = this.paintPoint(event);\n    //     paintPoint.paint();\n    //     this.prevX = null; this.prevY = null;\n    //     console.log('Pen tool suspended succesfully...');\n    // }\n","export default class Frame {\n    constructor(count, layerList) {\n        this.count = count;\n        this.layerList = layerList;\n    }\n\n    html() {\n        let node = $(`<button class='frame btn btn-primary'><span>${this.count}</span>${window.globalState.previewTemplate}</button>`);\n        $('.frames').append(node);\n        this.layerList.preview(node.find('.preview'));\n    }\n\n    preview(canvas) {\n        return this.layerList.redraw(canvas);\n    }\n}\n","\nexport default class canvasManager {\n    constructor(width, height, canvas) {\n        this.unit_width = width;\n        this.unit_height = height;\n        this.canvas = canvas;\n        this.constructCanvas();\n    }\n\n    constructCanvas() {\n        this.canvas.getContext('2d').fillStyle = '#ffffff00';\n        this.canvas.getContext('2d').fillRect(0, 0, this.canvas.width, this.canvas.height);\n        this.unit_size = this.canvas.width / this.unit_width;\n        window.globalState.unit_size = this.unit_size;\n    }\n\n    getCanvasPoint(pageX, pageY) {\n        let rect = this.canvas.getBoundingClientRect();\n        let canvasX;\n        let canvasY;\n        if (pageX >= rect.width + rect.left) {\n            canvasX = rect.width + rect.left;\n        } else if (pageX <= rect.left) {\n            canvasX = rect.left;\n        } else {\n            canvasX = pageX - rect.left;\n        }\n        if (pageY >= rect.height + rect.top) {\n            canvasY = rect.height + rect.top;\n        } else if (pageY <= rect.top) {\n            canvasY = rect.top;\n        } else {\n            canvasY = pageY - rect.top;\n        }\n        return { canvasX: canvasX, canvasY: canvasY };\n    }\n\n    findUnit(canvasX, canvasY) {\n        let unitX;\n        let unitY;\n        unitX = Math.floor(canvasX / this.unit_size);\n        unitY = Math.floor(canvasY / this.unit_size);\n        return { unitX: unitX, unitY: unitY };\n    }\n\n    pointedUnit(pageX, pageY) {\n        let XY = this.getCanvasPoint(pageX, pageY);\n        return this.findUnit(XY.canvasX, XY.canvasY);\n    }\n\n    getUnit(unitX, unitY) {\n        return new canvasUnit(this, unitX, unitY);\n    }\n\n    getPointedUnit(pageX, pageY) {\n        let XY = this.getCanvasPoint(pageX, pageY);\n        XY = this.findUnit(XY.canvasX, XY.canvasY);\n        return this.getUnit(XY.unitX, XY.unitY);\n    }\n\n    locateUnit(unitX, unitY) {\n        return { canvasX: unitX * this.unit_size, canvasY: unitY * this.unit_size };\n    }\n\n    locateThatUnit(canvasUnit) {\n        return this.locateUnit(canvasUnit.d_x, canvasUnit.d_y);\n    }\n}\n\nexport class canvasUnit {\n    constructor(canvasManager, unitX, unitY, dir) {\n        this.d_x = unitX;\n        this.d_y = unitY;\n        this.manager = canvasManager;\n        let XY = this.manager.locateUnit(this.d_x, this.d_y);\n        this.center_pixel = { d_x: XY.canvasX + (this.manager.unit_size / 2), d_y: XY.canvasY + (this.manager.unit_size / 2) };\n        Object.defineProperty(this, \"unitX\", { set: function (x) { this.reconfigurePixels(); this.unitX = x; } });\n        Object.defineProperty(this, \"unitY\", { set: function (y) { this.reconfigurePixels(); this.unitY = y; } });\n        this.reconfigurePixels();\n        this.dir = dir;\n        this['south'] = this.south.bind(this);\n        this['north'] = this.north.bind(this);\n        this['east'] = this.east.bind(this);\n        this['west'] = this.west.bind(this);\n        this['south_west'] = this.south_west.bind(this);\n        this['south_east'] = this.south_east.bind(this);\n        this['north_west'] = this.south_west.bind(this);\n        this['north_east'] = this.south_east.bind(this);\n\n    }\n\n    south(i) {\n        if (this.d_y - i < 0) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x, this.d_y - i, 'south');\n    }\n\n    north(i) {\n        if (this.d_y + i > this.manager.unit_height - 1) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x, this.d_y + i, 'north');\n    }\n\n    west(i) {\n        if (this.d_x - i < 0) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x - i, this.d_y, 'west');\n    }\n\n    east(i) {\n        if (this.d_x + i > this.manager.unit_width - 1) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x + i, this.d_y, 'east');\n    }\n\n    south_west(i) {\n        if (this.d_x - i < 0 || this.d_y - i < 0) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x - i, this.d_y - i, 'south_west');\n    }\n\n    south_east(i) {\n        if (this.d_x + i > this.manager.unit_width - 1 || this.d_y - i < 0) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x + i, this.d_y - i, 'south_east');\n    }\n\n    'north_west'(i) {\n        if (this.d_x - i < 0 || this.d_y + i > this.manager.unit_height - 1) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x - i, this.d_y + i, 'north_west');\n    }\n\n    north_east(i) {\n        if (this.d_x + i > this.manager.unit_width - 1 || this.d_y + i > this.manager.unit_height - 1) {\n            return null;\n        }\n        return new canvasUnit(this.manager, this.d_x + i, this.d_y + i, 'north_east');\n    }\n\n    get_neighbors(i) {\n        let neighbors = [];\n        neighbors.push(this.west(i), this.north_west(i), this.north(i), this.north_east(i));\n        neighbors.push(this.east(i), this.south_east(i), this.south(i), this.south_west(i));\n        return neighbors;\n    }\n\n    reconfigurePixels() {\n        let XY = this.manager.locateUnit(this.d_x, this.d_y);\n        this.pixels = this.manager.canvas.getContext('2d').getImageData(XY.canvasX, XY.canvasY, this.manager.unit_size, this.manager.unit_size);\n    }\n\n    getColor() {\n        let XY = this.manager.locateUnit(this.d_x, this.d_y);\n        this.pixels = this.manager.canvas.getContext('2d').getImageData(XY.canvasX, XY.canvasY, this.manager.unit_size, this.manager.unit_size);\n        let data = this.pixels.data;\n        if (data[3] < 255) {\n\n            return null;\n        }\n        return `${data[0]}${data[1]}${data[2]}`;\n    }\n\n    getPixels() {\n        return this.pixels;\n    }\n\n    paint(path, width, color) {\n        let XY = this.manager.locateUnit(this.d_x, this.d_y);\n        if (path === null) {\n            this.manager.canvas.getContext('2d').fillStyle = color;\n            this.manager.canvas.getContext('2d').rect(XY.canvasX, XY.canvasY, width, width);\n            this.manager.canvas.getContext('2d').fill();\n        } else {\n            path.rect(XY.canvasX, XY.canvasY, width, width);\n            this.manager.canvas.getContext('2d').fill(path);\n        }\n        this.painted = true;\n    }\n}\n","export default class layersManager {\n    constructor(layersList) {\n        this.layersList = layersList;\n    }\n\n    html() {\n        let str = this.layersList.layers().reduce((acc, x) => acc += x.html(), '');\n        return `\n        <div class='layers btn-toolbar-vertical'>\n            <ul class='layers-list btn-group-vertical'>\n            ${str}\n            </ul>\n            <ul class='layersbar btn-group-vertical'>\n                <button tool='newlayer'>New layer</button>\n            </ul>\n        </div>`\n    }\n\n    delete() {\n        $('.layers').remove();\n    }\n\n    bind() {\n        $('.layers-list').on('click', this.chooseLayer.bind(this));\n        $('.layersbar').on('click', (e) => { if (e.target.getAttribute('tool') === 'newlayer') this.layersList.createLayer(); });\n    }\n\n    chooseLayer(e) {\n        if ($(e.target).text() === window.globalState.currentLayer.name) {\n            return true;\n        }\n        $('.layers-list .active').removeClass('active');\n\n        e.target.classList.add('active');\n        this.layersList.editLayer($(e.target).text());\n    }\n}\n","export default class Layer {\n    constructor(name, canvasManager, zIndex) {\n        this.name = name;\n        this.manager = canvasManager;\n        this.zIndex = zIndex;\n        this.canvas = this.manager.canvas;\n    }\n\n    html() {\n        return `<button class='btn btn-primary'>${this.name}</button>`;\n    }\n}\n","import layersList from \"./layersList.js\";\n\n// import './style.css'\n\nexport default layersList;\n","import canvasManager from '../../screens/canvas/Tools/canvasManager.js'\nimport layersManager from './layersManager.js';\nimport Layer from './Layer.js';\n\nexport default class layersList {\n    constructor(signal, base_layer) {\n        if (base_layer) {\n            this.base_layer = base_layer;\n            this.layersManager = new layersManager(this);\n            this.listObject = { 'Layer 1': base_layer };\n            this.layersCount = 1;\n            window.globalState.currentLayer = base_layer;\n        }\n        else {\n            this.layersCount = 0;\n            this.layersManager = new layersManager(this);\n            this.listObject = {};\n            $('.workflow').empty();\n            this.createLayer('Layer 1');\n        }\n\n        this.updateView = signal;\n    }\n\n    embed() {\n        this.layersManager.delete();\n        let html = this.layersManager.html();\n        $('body').append(html);\n        this.layersManager.bind();\n    }\n\n    createLayer(name) {\n        console.log(this.updateView);\n        if (this.listObject[name] !== undefined) {\n            throw new Error('Cannot create layer with name specified');\n        }\n        this.layersCount++;\n        let canvas = $(window.globalState.canvasTemplate);\n        canvas.css('zIndex', this.layersCount);\n        $('.workflow').append(canvas);\n\n        let manager = new canvasManager(window.globalState.unit_width, window.globalState.unit_height, canvas[0]);\n\n        if (!name) {\n            name = `Layer ${this.layersCount}`;\n        }\n        this.listObject[name] = new Layer(name, manager, this.layersCount);\n        window.globalState.currentLayer = this.listObject[name];\n        if (window.globalState.currentTool) {\n            this.updateView();\n        }\n        this.lastLayer = this.listObject[name];\n        this.embed();\n    }\n\n    editLayer(name) {\n        if (!name || this.listObject[name] === undefined) {\n            throw new Error('Cannot find layer with name specified');\n        }\n        window.globalState.currentLayer = this.listObject[name];\n        if (window.globalState.currentTool) {\n            this.updateView();\n        }\n    }\n\n    linkSignal(signal) {\n        this.updateView = signal;\n    }\n\n    layers() {\n        return Object.keys(this.listObject).reduce((acc, x) => { acc.push(this.listObject[x]); return acc; }, []).reverse();\n    }\n\n    showCanvas() {\n        $('.workflow').empty();\n        Object.keys(this.listObject).forEach((x) => $('.workflow').append(this.listObject[x].canvas));\n        this.embed();\n    }\n\n    preview(canvas) {\n        Object.keys(this.listObject).reverse().forEach((x) => canvas[0].getContext('2d').drawImage(this.listObject[x].canvas, 0, 0));\n        return canvas.wrap('<p></p>').parent().html();\n    }\n\n    redraw(canvas) {\n        function getImageData(canvas) {\n            return canvas.getContext('2d').getImageData(0, 0, canvas.width, canvas.height);\n        }\n        Object.keys(this.listObject).reverse().forEach((x) => canvas[0].getContext('2d').putImageData(getImageData(this.listObject[x].canvas), 0, 0));\n        return canvas.wrap('<p></p>').parent().html();\n    }\n}\n","export default class framesManager {\n    constructor(framesList) {\n        this.framesList = framesList;\n    }\n\n    html() {\n        let str = `\n        <div class='frames'>\n            <ul class='framesbar btn-group-vertical'>\n                <button tool='newframe'>New frame</button>\n            </ul>\n        </div>`;\n        $('body').append(str);\n        this.framesList.frames().map((x) => x.html());\n    }\n\n    delete() {\n        $('.frames').remove();\n    }\n\n    bind() {\n        $('.preview').css('--i', window.globalState.unit_width);\n        $('.preview').css('--w', '100px');\n        $('.frame').on('click', this.chooseFrame.bind(this));\n        $('.framesbar').on('click', (event) => {\n            if ($(event.target).attr('tool') === 'newframe') {\n                this.framesList.createFrame();\n            }\n        });\n    }\n\n    chooseFrame(e) {\n        if (e.target.classList.contains('btn')) {\n            let target = $(e.target).find('span');\n            if (target.text() === window.globalState.currentFrame.count) {\n                return true;\n            }\n            $('.frames-list .active').removeClass('active');\n\n            e.target.classList.add('active');\n            this.framesList.editFrame(target.text());\n        }\n    }\n}\n","import framesList from \"./framesList.js\";\n\n// import './style.css'\n\nexport default framesList;\n","\nimport Frame from './Frame.js';\nimport layersList from '../layers-list/index.js';\nimport framesManager from './framesManager.js'\n\nexport default class framesList {\n    constructor(basicFrame, manager) {\n        if (basicFrame && manager) {\n            this.basicFrame = basicFrame;\n            this.framesManager = manager;\n            this.list = Array.of(this.basicFrame);\n            this.framesCount = 1;\n            window.globalState.currentFrame = basicFrame;\n        } else {\n            this.framesCount = 0;\n            this.framesManager = new framesManager(this);\n            this.list = [];\n            this.update = this.update.bind(this);\n        }\n    }\n\n    start(toolbarSignal) {\n        this.signal = toolbarSignal;\n        this.createFrame();\n\n    }\n\n    embed() {\n        this.framesManager.delete();\n        this.framesManager.html();\n\n\n        this.framesManager.bind();\n    }\n\n    createFrame() {\n        let frame = new Frame(this.framesCount, new layersList(this.signal));\n        this.list.push(frame);\n        this.embed();\n        window.globalState.currentFrame = frame;\n        this.framesCount++;\n    }\n\n    editFrame(count) {\n        console.log(count);\n        window.globalState.currentFrame = this.list[count];\n        window.globalState.currentFrame.layerList.showCanvas();\n        window.globalState.currentLayer = window.globalState.currentFrame.layerList.lastLayer;\n        this.embed();\n    }\n\n    update() {\n        this.embed();\n    }\n\n    frames() {\n        return this.list;\n    }\n}\n","window.globalState = {\n  app_name: 'PiskelClone',\n  canvasTemplate: '<canvas class=\"layer\" width= 500 height = 500 style=\"width: 500px; height: 500px; background-image: none; border:1px solid #000000;\"></canvas>',\n  previewTemplate: '<canvas class=\"preview\" width= 500 height = 500 style=\"width: 100px; height: 100px; border:1px solid #000000;\"></canvas>',\n  unit_width: 32,\n  unit_height: 32,\n  fps: 24\n};\n\n// import canvasManager from \"./Tools/canvasManager.js\";\n// import locator from \"./Tools/locator.js\";\nimport Pen from \"./screens/canvas/Tools/pen/index.js\";\nimport Eraser from \"./screens/canvas/Tools/eraser/index.js\";\nimport toolbarManager from \"./screens/canvas/Tools/toolbarManager.js\";\nimport colorManager from \"./screens/canvas/Tools/colorManager.js\";\nimport brushbarManager from \"./screens/canvas/Tools/brushbarManager.js\";\nimport Bucket from \"./screens/canvas/Tools/bucket/bucket.js\";\nimport framesList from \"./components/frames-list/index.js\";\nimport videoPreviewer from \"./screens/preview/videoPreviewer.js\";\n\nwindow.globalState.currentFramelist = new framesList();\n\n\n\nlet previewer = new videoPreviewer();\npreviewer.start();\n\nlet toolsObject = {};\ntoolsObject['pen'] = Pen;\ntoolsObject['eraser'] = Eraser;\ntoolsObject['bucket'] = Bucket;\n\nlet toolbar = new toolbarManager(toolsObject);\ntoolbar.start(window.globalState.currentFramelist.update, previewer.update);\nwindow.globalState.currentFramelist.start(toolbar.signal);\n\nlet colorbar = new colorManager('#000000', '#ff0000');\ncolorbar.start();\n\nlet brushbar = new brushbarManager(1);\nbrushbar.start();\n\n$(function () {\n  $('.workflow').css('--i', window.globalState.unit_width);\n  $('.workflow').css('--w', '500px');\n\n\n  console.log($('.workflow canvas')[0].toDataURL(\"image/gif\"));\n});\n\n\n","export default class videoPreviewer {\n    constructor() {\n        this.frame = 0;\n        this.update = this.update.bind(this);\n    }\n\n    async start() {\n        this.embed();\n        this.interval = setInterval(this.updateView.bind(this), 1000 / window.globalState.fps);\n\n    }\n\n    async updateView() {\n        this.frames[this.frame].preview(this.canvas);\n        if (this.canvas2 !== undefined) {\n            console.log(this.canvas2);\n            this.frames[this.frame].preview(this.canvas2);\n        }\n        if (this.frame === this.frames.length - 1) {\n\n            this.frame = 0;\n            return;\n        }\n        this.frame++;\n    }\n\n    async embed() {\n        clearInterval(this.interval);\n        let canvas = $(window.globalState.previewTemplate);\n        $('body').append(canvas);\n        $('body .preview').wrap('<div class=\"big_preview\"/>');\n        this.canvas = $('.big_preview canvas');\n        this.frames = window.globalState.currentFramelist.frames();\n        $('body').append('<button class =\"fullpreview\">Preview</button>');\n        $('body .fullpreview').on('click', this.blankwindow.bind(this));\n    }\n\n    async update() {\n        clearInterval(this.interval);\n        this.frames = window.globalState.currentFramelist.frames();\n        this.interval = setInterval(this.updateView.bind(this), 1000 / window.globalState.fps);\n    }\n\n    async blankwindow() {\n        clearInterval(this.interval);\n        let win = window.open('about:blank', 'Video preview');\n        $(win.document.body).append($(window.globalState.canvasTemplate));\n        this.canvas2 = $(win.document.body).find('canvas');\n        this.frames = window.globalState.currentFramelist.frames();\n        this.interval = setInterval(this.updateView.bind(this), 1000 / window.globalState.fps);\n    }\n}\n","import Pen from \"../pen/index.js\";\n\nexport default class Eraser extends Pen {\n    constructor() {\n        super();\n        this.name = 'eraser';\n    }\n\n    startAction(event) {\n        this.manager.canvas.getContext('2d').globalCompositeOperation = 'destination-out';\n        super.startAction(event);\n    }\n\n    stopAction(event) {\n        super.stopAction(event);\n        this.manager.canvas.getContext('2d').globalCompositeOperation = 'source-over';\n    }\n\n}\n","import Tool from \"../tool.js\";\n\nexport default class Bucket extends Tool {\n    constructor() {\n        super('bucket');\n        this.clickAction = this.clickAction.bind(this);\n    }\n\n\n    async clickAction(event) {\n        this.start = this.manager.getPointedUnit(event.pageX, event.pageY);\n        this.color = this.start.getColor();\n        console.log(this.color, this.start.d_x, this.start.d_y);\n        async function paint(arr, color) {\n\n            for (let i = 0; i < arr.length; i++) {\n\n                if (arr[i] === null) {\n                    return [];\n                }\n                console.log(arr[i].getColor(), arr[i]);\n\n                if (arr[i].getColor() === color) {\n                    arr[i].paint(null, window.globalState.unit_size, window.globalState.secondaryColor);\n                } else {\n                    arr.splice(i, 1);\n                }\n\n            }\n            if (arr !== []) {\n                arr = arr.map((x) => { if (x.dir) { console.log(x[x.dir]); return x[x.dir](); } });\n            }\n            return arr;\n        }\n\n        async function rec(color, unit, arr, i) {\n\n            if (i === 1) {\n                unit.paint(null, window.globalState.unit_size, window.globalState.secondaryColor);\n                arr = unit.get_neighbors(1);\n            } else {\n                arr = await paint(arr, color);\n            }\n            if (arr === []) {\n                return;\n            }\n\n            i++;\n            if (i > 200) {\n                return;\n            }\n            return rec(color, unit, arr, i);\n        }\n\n        rec(this.color, this.start, Array.of(this.start), 1);\n    }\n\n\n    startAction() { return true; }\n\n    intimeActions() { return true; }\n\n    stopAction() { return true; }\n\n    toolAction() { return true; }\n\n    activateTool() { return true; }\n\n    deactivateTool() { return true; }\n}\n","export default class toolbarManager {\n    constructor(toolsObject) {\n        this.toolsObject = toolsObject;\n        window.globalState.currentTool = null;\n    }\n\n    start(updateView, updatePreview) {\n        $('.btn').mouseup(function () { this.blur() });\n\n        $('.toolbar').on('click', this.delegate.bind(this));\n        this.signal = this.signal.bind(this);\n        this.update = updateView;\n        this.reload = updatePreview;\n    }\n\n    signal() {\n        this.tool = window.globalState.currentTool;\n        this.tool.invokeTool();\n        $(this.tool.manager.canvas).off('click');\n        $(this.tool.manager.canvas).off('mousedown');\n        $(this.tool.manager.canvas).off('mousemove');\n        $(this.tool.manager.canvas).off('mouseup');\n        $(this.tool.manager.canvas).off('mouseout');\n        $(this.tool.manager.canvas).on('click', (e => { e.stopImmediatePropagation(); window.globalState.currentTool.clickAction(e); }));\n        $(this.tool.manager.canvas).on('mousedown', (e) => window.globalState.currentTool.activateTool(e));\n        $(this.tool.manager.canvas).on('mousemove', (e) => window.globalState.currentTool.toolAction(e));\n        $(this.tool.manager.canvas).on('mouseup', (e) => { this.reload(); this.update(); window.globalState.currentTool.deactivateTool(e) });\n        $(this.tool.manager.canvas).on('mouseout', (e) => { this.reload(); this.update(); window.globalState.currentTool.deactivateTool(e) });\n    }\n\n    delegate(event) {\n        this.event = event;\n        this.tool = new this.toolsObject[event.target.getAttribute('tool')].prototype.constructor();\n\n        if (window.globalState.currentTool) {\n            $(this.tool.manager.canvas).off('click');\n            $(this.tool.manager.canvas).off('mousedown');\n            $(this.tool.manager.canvas).off('mousemove');\n            $(this.tool.manager.canvas).off('mouseup');\n            $(this.tool.manager.canvas).off('mouseout');\n            $('.toolbar .active').removeClass('active');\n            if (event.target.getAttribute('tool') === window.globalState.currentTool.name) {\n                window.globalState.currentTool.suspendTool(event);\n                return true;\n            }\n            window.globalState.currentTool.suspendTool(event);\n        }\n        event.target.classList.add('active');\n        this.tool.invokeTool(event);\n        $(this.tool.manager.canvas).on('click', (e => { e.stopImmediatePropagation(); window.globalState.currentTool.clickAction(e); }));\n        $(this.tool.manager.canvas).on('mousedown', (e) => window.globalState.currentTool.activateTool(e));\n        $(this.tool.manager.canvas).on('mousemove', (e) => window.globalState.currentTool.toolAction(e));\n        $(this.tool.manager.canvas).on('mouseup', (e) => { this.reload(); this.update(); window.globalState.currentTool.deactivateTool(e) });\n        $(this.tool.manager.canvas).on('mouseout', (e) => { this.reload(); this.update(); window.globalState.currentTool.deactivateTool(e) });\n        this.tool = null;\n    }\n\n\n}\n","export default class colorManager {\n    constructor(default_primary, default_secondary) {\n        window.globalState.primaryColor = default_primary;\n        window.globalState.secondaryColor = default_secondary;\n        this.default_primary = default_primary;\n        this.default_secondary = default_secondary;\n    }\n\n    start() {\n        $(\".colorbar [tool='primaryColor']\")[0].value = window.globalState.primaryColor;\n        $(\".colorbar [tool='secondaryColor']\")[0].value = window.globalState.secondaryColor;\n        $('.colorbar').on('input', this.delegate.bind(this));\n        $('.colorbar').on('click', this.delegate.bind(this));\n    }\n\n    delegate(event) {\n        if (event.target.getAttribute('tool') === 'swap_colors') {\n            let buf = window.globalState.secondaryColor;\n            window.globalState.secondaryColor = window.globalState.primaryColor;\n            window.globalState.primaryColor = buf;\n            $(\".colorbar [tool='primaryColor']\")[0].value = window.globalState.primaryColor;\n            $(\".colorbar [tool='secondaryColor']\")[0].value = window.globalState.secondaryColor;\n            return true;\n        }\n        window.globalState[event.target.getAttribute('tool')] = event.target.value;\n    }\n}\n","export default class brushbarManager {\n    constructor(default_width) {\n        this.default_width = default_width;\n        window.globalState.brushWidth = default_width;\n    }\n\n    start() {\n        $('#width-bar')[0].value = window.globalState.brushWidth;\n        $(\".brushbar label[for='width-bar']\").text(window.globalState.brushWidth);\n        $('#width-bar').on('input', this.update.bind(this));\n    }\n\n    update(event) {\n        window.globalState.brushWidth = event.target.value;\n        $(\".brushbar label[for='width-bar']\").text(window.globalState.brushWidth);\n    }\n}\n"],"sourceRoot":""}